(this.webpackJsonpdesafio=this.webpackJsonpdesafio||[]).push([[0],[,,,,,,,function(e,t,a){},function(e){e.exports=JSON.parse('{"brands":[{"name":"Fiat","id":"01"}],"models":[{"fipe_name":"Fiat Uno Mile","name":"Fiat Uno Mile","id":"01"}],"years":[{"referencia":"001","fipe_codigo":"001-b","name":"2000","combustivel":"Gasolina","marca":"Fiat","ano_modelo":"2000","preco":"R$ 10.000,00","key":"","time":"","veiculo":"Fiat Uno Mile 2p","id":"01"}],"result":{"referencia":"001","fipe_codigo":"001-b","name":"Fiat Uno Mile 2p","combustivel":"Gasolina","marca":"Fiat","ano_modelo":"2000","preco":"R$ 10.000,00","key":"","time":"","veiculo":"Fiat Uno Mile 2p","id":"01"}}')},,,function(e,t,a){e.exports=a.p+"static/media/arrow.cdfdf297.svg"},function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),c=a.n(r),i=(a(17),a(2)),s=a(3),l=a(5),u=a(4),m=a(1),d=a(6),h=(a(7),"http://denrakaev.com/wp-content/uploads/2015/03/no-image-800x511.png"),p=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={imageURL:h},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.keywords&&this.getCarImage(this.props.keywords)}},{key:"componentDidUpdate",value:function(e){this.props.keywords!==e.keywords&&""!==this.props.keywords&&this.getCarImage(this.props.keywords)}},{key:"getCarImage",value:function(e){var t=this;if(""===e||void 0===e)return!1;fetch("//www.carimagery.com/api.asmx/GetImageUrl?searchTerm="+e).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")})).then((function(e){var a=e.getElementsByTagName("string")[0]||!1,n=!!a&&a.childNodes[0];n&&t.setState({imageURL:n.nodeValue})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"Badge"},o.a.createElement("figure",{className:"Badge__box"},o.a.createElement("img",{className:"Badge__image",alt:"",src:this.state.imageURL})))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={referencia:"",fipe_codigo:"",name:"",combustivel:"",marca:"",ano_modelo:"",preco:"",key:"",time:"",veiculo:"",id:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.showSelectedCar;e&&(this.setState({fipe_codigo:e.fipe_codigo,name:e.name,combustivel:e.combustivel,marca:e.marca,ano_modelo:e.ano_modelo,preco:e.preco,key:e.key,time:e.time,id:e.id}),document.querySelector(".Results").scrollIntoView({behavior:"smooth"}))}},{key:"componentDidUpdate",value:function(e){if(this.props.showSelectedCar.key!==e.showSelectedCar.key||!e.showSelectedCar){var t=this.props.showSelectedCar;this.setState({fipe_codigo:t.fipe_codigo,name:t.name,combustivel:t.combustivel,marca:t.marca,ano_modelo:t.ano_modelo,preco:t.preco,key:t.key,time:t.time,id:t.id})}}},{key:"render",value:function(){return o.a.createElement("div",{className:"Results"},o.a.createElement("h2",null,"Encontramos o seu carro!"),o.a.createElement("table",{className:"Results__table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"C\xf3digo FIPE:"),o.a.createElement("td",null,this.state.fipe_codigo)),o.a.createElement("tr",null,o.a.createElement("th",null,"Nome:"),o.a.createElement("td",null,this.state.name)),o.a.createElement("tr",null,o.a.createElement("th",null,"Combust\xedvel:"),o.a.createElement("td",null,this.state.combustivel)),o.a.createElement("tr",null,o.a.createElement("th",null,"Marca:"),o.a.createElement("td",null,this.state.marca)),o.a.createElement("tr",null,o.a.createElement("th",null,"Ano Modelo:"),o.a.createElement("td",null,this.state.ano_modelo)),o.a.createElement("tr",null,o.a.createElement("th",null,"Pre\xe7o:"),o.a.createElement("td",null,this.state.preco)))))}}]),t}(n.Component),v=a(11),b=a.n(v),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.props.onChangeEvent(e)}},{key:"render",value:function(){var e=this.props.options.map((function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)}));return o.a.createElement("div",{className:"SelectBox"},o.a.createElement("label",null,this.props.label,":"),o.a.createElement("div",{className:"select-box"},o.a.createElement("select",{onChange:this.onChange},o.a.createElement("option",{value:""},"Selecione"),e),o.a.createElement("img",{src:b.a,className:"select-arrow",alt:"arrow"})))}}]),t}(n.Component),g=a(8),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={brands:[],models:[],years:[],brand:"",model:"",year:"",selectedCar:!1},a.onSelectBrand=a.onSelectBrand.bind(Object(m.a)(a)),a.onSelectModel=a.onSelectModel.bind(Object(m.a)(a)),a.onSelectYear=a.onSelectYear.bind(Object(m.a)(a)),a.updateimage=a.updateimage.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];fetch("".concat("//fipeapi.appspot.com/api/1/carros","/marcas.json")).then((function(e){return e.json()})).then((function(a){t=a.map((function(e){return e})),e.setState({brands:t})})).catch((function(a){console.log("API indispon\xedvel!"),console.error(a),t=g.brands.map((function(e){return e})),e.setState({brands:t})}))}},{key:"updateimage",value:function(){var e=[];if(""!==this.state.brand){var t=this.state.brand,a=this.state.brands.find((function(e){return parseInt(e.id)===parseInt(t)}));e.push(a.fipe_name)}if(""!==this.state.model){var n=this.state.model,o=this.state.models.find((function(e){return parseInt(e.id)===parseInt(n)}));e.push(o.fipe_name.split(" ")[0])}if(""!==this.state.year){var r=this.state.year,c=this.state.years.find((function(e){return parseInt(e.id)===parseInt(r)}));e.push(c.name.split(" ")[0])}this.props.onUpdateSelection(e)}},{key:"onSelectBrand",value:function(e){var t=this,a=e.target.value;if(""===a)return this.setState({selectedCar:!1,brand:"",models:[],model:"",years:[],year:""}),!1;var n=[];this.setState({brand:a,models:[],model:"",years:[],year:"",selectedCar:!1}),fetch("".concat("//fipeapi.appspot.com/api/1/carros","/carros/veiculos/").concat(a,".json")).then((function(e){return e.json()})).then((function(e){n=e.map((function(e){return e})),t.setState({models:n}),t.updateimage()})).catch((function(e){console.log("API indispon\xedvel!"),console.error(e),n=g.models.map((function(e){return e})),t.setState({models:n}),t.updateimage()})).finally((function(){document.querySelector(".SelectBox:last-child").scrollIntoView({behavior:"smooth"})}))}},{key:"onSelectModel",value:function(e){var t=this,a=e.target.value;if(""===a)return this.setState({model:"",year:"",years:[],selectedCar:!1}),!1;var n=this.state.brand,o=[];this.setState({model:a,years:[],year:"",selectedCar:!1}),fetch("".concat("//fipeapi.appspot.com/api/1/carros","/carros/veiculo/").concat(n,"/").concat(a,".json")).then((function(e){return e.json()})).then((function(e){o=e.map((function(e){return e})),t.setState({years:o}),t.updateimage()})).catch((function(e){console.log("API indispon\xedvel!"),console.error(e),o=g.years.map((function(e){return e})),t.setState({years:o}),t.updateimage()})).finally((function(){document.querySelector(".SelectBox:last-child").scrollIntoView({behavior:"smooth"})}))}},{key:"onSelectYear",value:function(e){var t=this,a=e.target.value;if(""===a)return this.setState({year:"",selectedCar:!1}),!1;var n=this.state.brand,o=this.state.model;this.setState({year:a}),fetch("".concat("//fipeapi.appspot.com/api/1/carros","/carros/veiculo/").concat(n,"/").concat(o,"/").concat(a,".json")).then((function(e){return e.json()})).then((function(e){if(!e)return!1;t.setState({selectedCar:e}),t.updateimage()})).catch((function(e){console.log("API indispon\xedvel!"),console.error(e),t.setState({selectedCar:g.result}),t.updateimage()}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"CalculatorForm"},o.a.createElement("form",null,o.a.createElement(y,{label:"Marca",options:this.state.brands,onChangeEvent:this.onSelectBrand}),this.state.models.length>0?o.a.createElement(y,{label:"Modelo",options:this.state.models,onChangeEvent:this.onSelectModel}):null,this.state.years.length>0?o.a.createElement(y,{label:"Ano",options:this.state.years,onChangeEvent:this.onSelectYear}):null),this.state.selectedCar?o.a.createElement(f,{showSelectedCar:this.state.selectedCar}):null)}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={keywords:""},a.updateSelection=a.updateSelection.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"updateSelection",value:function(e){var t=e.join("+").replace(/ /g,"+");this.setState({keywords:t})}},{key:"render",value:function(){return o.a.createElement("div",{className:"Card"},o.a.createElement("header",{className:"Card-header"},o.a.createElement(p,{keywords:this.state.keywords})),o.a.createElement(E,{onUpdateSelection:this.updateSelection}))}}]),t}(n.Component);var k=function(){return o.a.createElement("div",{className:"Calculator"},o.a.createElement("h1",null,"Quanto vale meu carro?"),o.a.createElement("p",null,"Descubra aqui por quanto seu carro pode ser vendido."),o.a.createElement(S,null),o.a.createElement("small",null,"Desenvolvido por Vin\xedcius Rocha"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.81bad6bb.chunk.js.map